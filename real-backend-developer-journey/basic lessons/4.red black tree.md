# Red Black Tree

## Basics

### Binary Search Trees

1. Ordered, or sorted, binary trees.
2. Nodes can have 2 subtrees.
3. Items to the left of a given node are smaller.
4. Items to the right of a given node are larger.

A balanced binary search tree:

![screenshot](./pictures/17632000.png)

A unbalanced binary search tree:
ä¸‹é¢çš„äºŒå‰æŸ¥æ‰¾æ ‘è·Ÿåˆ—è¡¨æ²¡æœ‰åŒºåˆ«
![screenshot](./pictures/906035000.png)

### Balanced Search Trees

å¹³è¡¡æœç´¢æ ‘ä¿è¯äº†å¯¹äº`n`ä¸ªå…ƒç´ å®ƒçš„é«˜åº¦ä¸€å®šæ˜¯`O(log n)`

### Red Black Tree

1. A node is either red ğŸ”´ or black âš«ï¸
2. The **root** and **leaves(NIL)** are black âš«ï¸
3. If a node is red ğŸ”´, then its children are black âš«ï¸
4. All paths from a node to its NIL descendants contain the same number of black nodes.

![screenshot](./pictures/388041000.png)

![screenshot](./pictures/604388000.png)

#### Extra Notes

1. Nodes require **one storage bit** to keep track of color
2. The longest path (root farthest NIL) is no more than twice the length of
   the shortest path ( root to nearest NIL)

   - Shortest path: all black nodes
   - Longest path: alternating red and black

#### Operations

- Search
- Insert
- Remove

search è·Ÿæ™®é€šçš„äºŒå‰æœç´¢æ ‘æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯ Insert è·Ÿ Remove éœ€è¦é€šè¿‡æ—‹è½¬æ¥æ¢å¤è¢«æ‰“ç ´çš„çº¢é»‘æ ‘è§„åˆ™ã€‚(Insert and Remove may result in violation of red-black tree properties)

#### Time Complexity

- Search O(log n)
- Insert O(log n)
- Remove O(log n)

#### Space Complexity

- O(n)

ç”±äºåªæ˜¯é¢å¤–ç”¨äº†ä¸€ä¸ª storage bit æ¥å­˜å‚¨é¢œè‰²ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)

## Rotation

1. alters the structure of a tree by rearranging subtrees
2. goal is to decrease the height of the tree
    - red-black trees: maximum height of O(log n)
    - larger subtrees up, smaller subtrees down
3. does not affect the order of elements    

### Two types of rotations

#### Left Rotation

![screenshot](./pictures/45539000.png)

#### Right Rotation

![screenshot](./pictures/694606000.png)

### Rotation's Time Complexicity

O(1)

## Insertion Strategy

red-black-tree = self balancing binary search tree

### Relationships

![screenshot](./pictures/76940000.png)

### Strategy

é‡‡å–çš„ç­–ç•¥ä¸ºä¸¤é¡¹:

1. Insert Z and color it red ğŸ”´
2. Recolor and rotate nodes to fix  violatin

é€šè¿‡æ·»åŠ çº¢è‰²çš„èŠ‚ç‚¹ï¼Œå°†ä¼šå¾ˆå®¹æ˜“æ‰“ç ´è¿™ä¸¤æ¡è§„åˆ™:

2. The **root** and **leaves(NIL)** are black âš«ï¸
3. If a node is red ğŸ”´, then its children are black âš«ï¸

ä½†æ˜¯è¿™ä¸¤æ¡è§„åˆ™æ¯”è¾ƒå®¹æ˜“æ¢å¤

### 4 Scenarios

1. Z = ROOT
2. Z.uncle = red ğŸ”´
3. Z.uncle = black âš«ï¸  & triangle
4. Z.uncle = black âš«ï¸  & line

![screenshot](./pictures/480578000.png)

![screenshot](./pictures/459716000.png)

![screenshot](./pictures/426581000.png)

Z AND Z's parent AND z's grandparent form a triangle

![screenshot](./pictures/41209000.png)

![screenshot](./pictures/448878000.png)

å°†Zçš„çˆ¶äº²ä»¥Zç›¸åçš„æ–¹å‘æ—‹è½¬
![screenshot](./pictures/932526000.png)

å½“Zè·Ÿä»–çš„çˆ¶äº²éƒ½æ˜¯å³èŠ‚ç‚¹æˆ–è€…å·¦èŠ‚ç‚¹å°±å½¢æˆäº†ä¸€æ¡line

![screenshot](./pictures/543404000.png)
å°†ç¥–çˆ¶èŠ‚ç‚¹ä»¥ä¸Zç›¸åçš„æ–¹å‘æ—‹è½¬
![screenshot](./pictures/573247000.png)

![screenshot](./pictures/604469000.png)
ç„¶åé‡æ–°æ¶‚è‰²
![screenshot](./pictures/246571000.png)

## Insertion